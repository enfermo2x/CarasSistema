{
    "name": "Python 3",
    // Base de imagen: Ya usas Python 3.11, lo cual es correcto.
    "image": "mcr.microsoft.com/devcontainers/python:1-3.11-bookworm",
    
    "customizations": {
        "codespaces": {
            "openFiles": [
                "README.md",
                "streamlit_app.py"
            ]
        },
        "vscode": {
            "settings": {},
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance"
            ]
        }
    },
    
    // ==========================================================
    // üõ†Ô∏è MODIFICACI√ìN CLAVE: Instalaci√≥n de libGL1-mesa-glx
    // ==========================================================
    "updateContentCommand": "sudo apt-get update && sudo apt-get install -y libgl1-mesa-glx; [ -f packages.txt ] && sudo xargs apt install -y <packages.txt; [ -f requirements.txt ] && pip3 install --user -r requirements.txt; pip3 install --user streamlit; echo '‚úÖ Packages installed and Requirements met'",
    
    // Notas sobre updateContentCommand:
    // 1. "sudo apt-get install -y libgl1-mesa-glx": Esto instala la dependencia 
    //    de sistema libGL.so.1 que OpenCV (cv2) necesita. ¬°Esto soluciona tu error!
    // 2. Mantenemos la l√≥gica original de packages.txt y requirements.txt.
    
    "postAttachCommand": {
        "server": "streamlit run streamlit_app.py --server.enableCORS false --server.enableXsrfProtection false"
    },
    
    "portsAttributes": {
        "8501": {
            "label": "Application",
            "onAutoForward": "openPreview"
        }
    },
    
    "forwardPorts": [
        8501
    ]
}
